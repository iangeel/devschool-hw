var woeid,container=document.querySelector("div"),idInputVal=document.forms.myForm.id.value,btn=document.querySelector("#btn"),idInput=document.forms.myForm.id;btn.innerHTML="Get Location",idInput.addEventListener("input",function(){btn.innerHTML="Get Forecast"}),btn.addEventListener("click",function(){"Get Location"==btn.innerHTML||null==idInputVal||""==idInput.value?(btn.innerHTML="Get Location",container.innerHTML="",showLocation()):showWeather()});const getLocation=async()=>{try{const t=document.forms.myForm.cityName.value;return await axios.get(`https://www.metaweather.com/api/location/search/?query=${t}`)}catch(t){console.error(t)}},getWeather=async()=>{try{if(null!=woeid)return await axios.get(`https://www.metaweather.com/api/location/${woeid}/`)}catch(t){console.error(t)}},showLocation=async()=>{const t=await getLocation();t&&(t.data&&1==t.data.length?(console.log(t.data[0].title),container.innerHTML+=t.data[0].title,woeid=t.data[0].woeid,container.innerHTML+=" - City id: "+woeid):alert("There are more than 1 city with this name / NETWORK PROBLEM"))},showWeather=async()=>{const t=await getWeather();t.data&&(console.log(t.data),addContent(t.data.consolidated_weather[0].weather_state_name,t.data.consolidated_weather[0].min_temp,t.data.consolidated_weather[0].max_temp,t.data.consolidated_weather[0].weather_state_abbr))};function addContent(t,e,a,n){var o=document.createElement("p"),i=document.createTextNode("State: "+t),r=document.createElement("img");r.src=`https://www.metaweather.com/static/img/weather/ico/${n}.ico`,o.appendChild(i),o.appendChild(r),container.lastChild.parentNode.insertBefore(o,container.lastChild.nextSibling);var c=document.createElement("p"),d=document.createTextNode("Min temp: "+Math.trunc(e));c.appendChild(d),container.lastChild.parentNode.insertBefore(c,container.lastChild.nextSibling);var l=document.createElement("p"),s=document.createTextNode("Max temp: "+Math.trunc(a));l.appendChild(s),container.lastChild.parentNode.insertBefore(l,container.lastChild.nextSibling)}
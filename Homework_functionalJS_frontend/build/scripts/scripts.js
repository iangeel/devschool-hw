var woeid,container=document.querySelector("div"),idInputVal=document.forms.myForm.id.value,btn=document.querySelector("#btn"),idInput=document.forms.myForm.id;btn.innerHTML="Get Location",idInput.addEventListener("keyup",function(){null==idInput.value||""==idInput.value?btn.innerHTML="Get Location":btn.innerHTML="Get Forecast"}),btn.addEventListener("click",function(){"Get Location"==btn.innerHTML||null==idInputVal||""==idInput.value?(btn.innerHTML="Get Location",container.innerHTML="",showLocation()):showWeather()});const getLocation=async()=>{try{const e=document.forms.myForm.cityName.value;return await axios.get(`https://www.metaweather.com/api/location/search/?query=${e}`)}catch(e){console.error(e)}},getWeather=async()=>{try{if(null!=woeid)return await axios.get(`https://www.metaweather.com/api/location/${woeid}/`)}catch(e){console.error(e)}},showLocation=async()=>{const e=await getLocation();e&&(e.data&&1==e.data.length?(console.log(e.data[0].title),container.innerHTML+=e.data[0].title,woeid=e.data[0].woeid,container.innerHTML+=" - City id: "+woeid):alert("There are more than 1 city with this name / NETWORK PROBLEM"))},showWeather=async()=>{const e=await getWeather();e.data&&(console.log(e.data),addContent(e.data.consolidated_weather[0].weather_state_name,e.data.consolidated_weather[0].min_temp,e.data.consolidated_weather[0].max_temp,e.data.consolidated_weather[0].weather_state_abbr))};function addContent(e,t,n,a){var o=document.createElement("p"),i=document.createTextNode("State: "+e),r=document.createElement("img");r.src=`https://www.metaweather.com/static/img/weather/ico/${a}.ico`,o.appendChild(i),o.appendChild(r),container.lastChild.parentNode.insertBefore(o,container.lastChild.nextSibling);var c=document.createElement("p"),d=document.createTextNode("Min temp: "+Math.trunc(t));c.appendChild(d),container.lastChild.parentNode.insertBefore(c,container.lastChild.nextSibling);var l=document.createElement("p"),s=document.createTextNode("Max temp: "+Math.trunc(n));l.appendChild(s),container.lastChild.parentNode.insertBefore(l,container.lastChild.nextSibling)}